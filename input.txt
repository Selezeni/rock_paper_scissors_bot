F. Иннокентий и друзья
Иннокентий – москвич в пятом поколении. Блуждание между тремя тополями на Плющихе, ежемесячное посещение Мавзолея, кормление тапиров в Московском зоопарке – всё это в крови Иннокентия.

Помимо этого Иннокентий очень любит поесть. Как типичный среднестатистический москвич, Иннокентий посещает исключительно рестораны со средним чеком от 5000 рублей, любит устрицы и хорошие стейки зернового откорма, избегает кафе с шаурмой – боится, что его нечаянно накормят шавермой. Будучи добропорядочным горожанином, Иннокентий исправно оставляет на Яндекс.Картах отзывы на посещенные рестораны, живописно описуя свой гастрономический опыт.

Однажды Иннокентий понимает, что за пределами МКАД лежит целый мир, дикий и неизведанный. Он решается на самое опасное и рискованное путешествие в своей жизни – посещение Санкт-Петербурга. Иннокентий выбрал поезд на Яндекс.Расписаниях, забронировал отель на Яндекс.Путешествиях и отправился в путь.

Выйдя утром из вагона поезда «Красная Стрела», Иннокентий опасливо огляделся и решил хорошо подкрепиться. Дело за малым – подобрать хороший ресторан, удовлетворяющий его утонченным вкусам. Рекомендации друзей оказались бесполезны, ведь все они москвичи и плохо разбираются в петербургских гастрономических трендах. Давайте поможем Иннокентию найти вкусную еду.

Ваша задача предсказать пользователям из тестового набора рестораны в неродных городах, которым они поставят в следующую поездку оценку 4 и выше Метрика качества
M
N
A
P
@
100
=
1
∣
U
s
e
r
s
∣
∑
u
∈
U
s
e
r
s
1
m
i
n
(
n
u
,
100
)
∑
100
i
=
0
r
u
(
i
)
∗
p
u
@
i
MNAP@100=
∣Users∣
1
​
 ∑
u∈Users
​

min(n
u
​
 ,100)
1
​
 ∑
i=0
100
​
 r
u
​
 (i)∗p
u
​
 @i где
n
u
n
u
​
  - количество организаций из противоположного города, которым пользователь поставил оценку 4 или 5 за тестовый период
r
u
(
i
)
r
u
​
 (i) - ставил ли в течение тестового периода пользователь u оценку 4 или 5 организации, предсказанной ему на месте i (1 либо 0)

Решение засчитывается, если ваши предсказания проходят порог 0.008 MNAP Подсказка: чтобы побить порог, можно использовать не все фичи

Формат ввода
Вам даны файлы: users.csv - user_id, city - родной город пользователя. ссылка - https://disk.yandex.ru/d/lNiMbpoV5-T5KA

organisations.csv - описание организаций. ссылка - https://disk.yandex.ru/d/tDNxgvX53PHZfw org_id, city, features_id - категориальный фичи организации, rubrics_id - рубрики к которым относится заведение, average_bill - средний чек, rating - рейтинг из Яндекс.Карт

reviews.csv - оценки пользователей user_id, org_id, rating - оценка пользователя, ts - время оценки(в днях) ссылка - https://disk.yandex.ru/d/VG4kuAXREyO_qQ

test_users.csv - набор пользователей для которых нужно сделать предсказание. ссылка - https://disk.yandex.ru/d/ansmaSIQaaSrFA

Формат вывода
Вам нужно сделать предсказание ресторанов для пользователей из тестового набора Файл ответа имеет формат: user_id, List[org_id]

Смотрите пример файла с ответом, answer_example.csv - https://disk.yandex.ru/d/LxTv__Yklr6BQg